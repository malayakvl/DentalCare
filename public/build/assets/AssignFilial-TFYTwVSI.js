import{c as f,q as v,u as y,W as b,r as N,j as e,Y as _,a as I,y as S}from"./app-DUD9FxAe.js";import{A as L}from"./AuthenticatedLayout-BBwQuZdH.js";import{a as P,L as A}from"./lang-Rf8_tUbV.js";import{l as C}from"./translation-C3eziIDM.js";import{I as q}from"./InputRoleSelect-XhwVtRZb.js";import{P as w}from"./PrimaryButton-DDpmqCs-.js";import{z}from"./transition-Dk6MwGSW.js";import"./ApplicationLogo-fdB6LoQ_.js";import"./portal-B0qkh_OA.js";import"./floating-ui.react-CImirEtS.js";import"./reselect-NCCDNIWx.js";import"./InputLabel-Doo0KOeK.js";import"./translation-CclwJSWy.js";function K({clinicData:l,filialData:t,rolesData:d,customer:o}){f(),v().props.auth.user;const p=y(P),r=new A({messages:C,locale:p}),{processing:u,recentlySuccessful:h}=b(),[c,x]=N.useState({permissions:[]}),g=s=>{s.preventDefault(),S.post(`/customer/assign-submit?id=${t.id}`,{customerId:o.id,clinicId:l.id,values:c})};return e.jsx(L,{header:e.jsx(_,{title:"Customers"}),children:e.jsx("div",{className:"py-0",children:e.jsx("div",{children:e.jsxs("div",{className:"p-4 sm:p-8 mb-8 content-data bg-content",children:[e.jsx("section",{children:e.jsx("header",{children:e.jsx("div",{className:"flex inline-flex",children:e.jsxs("h2",{children:[e.jsx(I,{className:"icon-back",href:"/customers",children:" "}),r.get("customer.attach")," «",o.name,"»"]})})})}),e.jsx("div",{children:e.jsxs("form",{onSubmit:g,className:"mt-0 space-y-4",encType:"multipart/form-data",children:[e.jsx("div",{className:"grid grid-cols-4 gap-4",children:t==null?void 0:t.map(s=>e.jsxs("div",{children:[e.jsx("h5",{children:s.name}),e.jsx(q,{name:`role_id_${s.id}`,options:d,onChange:i=>{let a=c.permissions;const j=i.target.id.replace("role_id_",""),m=a.filter(function(n){return n.filial_id!==parseInt(j)});parseInt(i.target.value)>0&&m.push({filial_id:s.id,role_id:i.target.value}),a=m,x(n=>({...n,permissions:a}))},required:!0,label:r.get("customer.role")})]},s.id))}),e.jsxs("div",{className:"flex items-center gap-4 mt-5",children:[e.jsx(w,{disabled:u,children:r.get("customer.save")}),e.jsx(z,{show:h,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:r.get("customer.saved")})})]})]})})]})})})})}export{K as default};
