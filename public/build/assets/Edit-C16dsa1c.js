import{c as b,q as N,u as y,r as k,W as C,j as e,Y as m,a as d,y as $}from"./app-DUD9FxAe.js";import{A as L}from"./AuthenticatedLayout-BBwQuZdH.js";import{a as S,L as I}from"./lang-Rf8_tUbV.js";import{l as P}from"./translation-CclwJSWy.js";import{I as R}from"./InputText-8GBDd7K4.js";import{C as w}from"./Checkbox-fxRrBKYk.js";import{P as T}from"./PrimaryButton-DDpmqCs-.js";import{z as q}from"./transition-Dk6MwGSW.js";import"./ApplicationLogo-fdB6LoQ_.js";import"./portal-B0qkh_OA.js";import"./floating-ui.react-CImirEtS.js";import"./reselect-NCCDNIWx.js";import"./InputLabel-Doo0KOeK.js";function M({roleData:r,permissionData:l,rolePermissions:p}){b(),N().props.auth.user;const x=y(S),t=new I({messages:P,locale:x}),[n,o]=k.useState({name:r.name,permissions:p}),{processing:h,recentlySuccessful:u}=C(),j=i=>{const a=i.target.id,s=i.target.value;o(c=>({...c,[a]:s}))},g=i=>{const a=n.permissions;if(i.checked)a.push(parseInt(i.id));else{const s=a.indexOf(parseInt(i.id));s>-1&&a.splice(s,1)}o(s=>({...s,permissions:a}))},f=i=>{i.preventDefault(),$.post(`/role/update?id=${r.id}`,n)},v=["clinic","filial","customer","store","invoice-incoming","invoice-outgoing","invoice-exchange","schedule","price","cabinet"];return e.jsxs(L,{header:e.jsx(m,{title:"Roles"}),children:[e.jsx(m,{title:"Roles"}),e.jsx("div",{className:"py-0",children:e.jsx("form",{onSubmit:f,className:"mt-0 space-y-4",encType:"multipart/form-data",children:e.jsxs("div",{className:"p-4 sm:p-8 mb-8 content-data bg-content",children:[e.jsx("section",{children:e.jsx("header",{children:e.jsx("div",{className:"flex inline-flex",children:e.jsxs("h2",{children:[e.jsx(d,{className:"icon-back",href:"/roles",children:"Â "}),t.get("role.title.edit")]})})})}),e.jsx("div",{children:e.jsxs("div",{className:"p-4 sm:p-8 mb-8 content-data bg-content",children:[e.jsx("div",{className:`row ${r.clinic_id?"":"disabled-content"}`,children:e.jsx(R,{name:"name",values:n,value:n.name,onChange:j,required:!0,label:t.get("role.name")})}),e.jsx("div",{children:e.jsx("div",{className:"grid-p",children:v.map((i,a)=>e.jsx("div",{className:"mb-[20px]",children:l&&l.filter(s=>s.name.includes(i)).map(s=>e.jsxs("div",{children:[e.jsx(w,{id:`${s.id}`,name:`remember[${s.id}]`,checked:n.permissions.includes(s.id),onChange:c=>{g(c.target)}}),e.jsx("label",{htmlFor:`${s.id}`,children:e.jsx("span",{className:"ms-2 text-sm text-gray-600",children:t.get(`role.${s.name}`)})})]}))}))})}),e.jsx("div",{className:"clearfix"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(d,{className:"btn-back",title:t.get("role.back"),href:"/roles",children:t.get("role.back")}),e.jsx(T,{disabled:h,children:t.get("role.save")}),e.jsx(q,{show:u,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:t.get("role.saved")})})]})]})})]})})})]})}export{M as default};
