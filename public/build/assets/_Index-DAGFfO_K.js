import{u as d,r as i,c as R,W as B,j as e,Y as j,Z as w,X as S,_ as H,$ as z,a0 as T}from"./app-DUD9FxAe.js";import{A as O}from"./AuthenticatedLayout-BBwQuZdH.js";import{a as V,L as I}from"./lang-Rf8_tUbV.js";import{l as K,s as W,a as X,e as Z,S as $}from"./FormPopupCreate-C30OULp5.js";import{M as G,B as p,r as J}from"./ModalError-CMV25L4x.js";import{M as Q}from"./Modal-EpUJ5xvo.js";import{h as o}from"./moment-xMAXktoI.js";import"./ApplicationLogo-fdB6LoQ_.js";import"./portal-B0qkh_OA.js";import"./transition-Dk6MwGSW.js";import"./floating-ui.react-CImirEtS.js";import"./reselect-NCCDNIWx.js";import"./PrimaryButton-DDpmqCs-.js";import"./InputText-8GBDd7K4.js";import"./InputLabel-Doo0KOeK.js";import"./InputSelect-BKKZVYkM.js";import"./translation-hRiGdJJJ.js";import"./SecondaryButton-b2dv0hg0.js";import"./index-BUYc01sp.js";import"./clsx-B-dksMZM.js";function De({customerData:m,formData:v,clinicData:b,cabinetData:y,eventsData:D}){const C=d(V),r=new I({messages:K,locale:C}),[c,x]=i.useState("default"),[E,g]=i.useState(!0),h=i.useRef(null),a=R(),k=d(W),M=d(X),l=d(Z),{data:U,setData:_,delete:q,processing:ee,reset:Y,errors:te,clearErrors:A}=B({title:"",doctor_id:"",patient_id:""}),f=()=>{A(),Y()},F=t=>{},P=async t=>{o(t.start).format("YYYY-MM-DD"),o(t.end).format("YYYY-MM-DD")};return i.useEffect(()=>{D=l,l.length>0&&l.forEach(t=>{t.start=new Date(t.startDate),t.end=new Date(t.endDate)}),g(!0)},[l]),e.jsxs(O,{header:e.jsx(j,{title:"Dental Care - Scheduler"}),children:[e.jsx(j,{title:"Dental Care - Scheduler"}),e.jsx("div",{className:"py-0",children:e.jsx("div",{children:e.jsxs("div",{className:"p-4 sm:p-8 mb-8 content-data bg-content",children:[e.jsx("section",{children:e.jsx("header",{children:e.jsx("div",{className:"flex inline-flex",children:e.jsx("h2",{children:r.get("scheduler.title.list")})})})}),e.jsx(Q,{show:k,onClose:f,children:e.jsx($,{formData:v,clinicData:b,customerData:m,cabinetData:y})}),e.jsx(G,{show:M,onClose:f,children:e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsx("span",{className:"block sm:inline",children:r.get("scheduler.error.popup")}),e.jsx("span",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>{a(w(!1));const t=document.getElementsByTagName("body")[0];t.style.overflow="inherit"},children:e.jsx("svg",{className:"fill-current h-6 w-6 text-red-500",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:`M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0
                                            1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10
                                            8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758
                                            3.15a1.2 1.2 0 0 1 0 1.698z`})})})]})}),E&&e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:e.jsxs("div",{style:{textAlign:"center"},children:[e.jsxs("span",{children:[r.get("scheduler.calendar.view"),": "]}),e.jsx(p,{color:c==="default"?"primary":"inherit",variant:c==="default"?"contained":"text",size:"small",onClick:()=>{var t,s;x("default"),(s=(t=h.current)==null?void 0:t.scheduler)==null||s.handleState("default","resourceViewMode")},children:r.get("scheduler.calendar.tabdefault")}),e.jsx(p,{color:c==="tabs"?"primary":"inherit",variant:c==="tabs"?"contained":"text",size:"small",onClick:()=>{var t,s;x("tabs"),(s=(t=h.current)==null?void 0:t.scheduler)==null||s.handleState("tabs","resourceViewMode")},children:r.get("scheduler.calendar.tabds")})]})}),e.jsx(J.Scheduler,{ref:h,events:l,resources:m,resourceFields:{idField:"id",textField:"name",subTextField:"phone",avatarField:"avatar",colorField:"color"},week:{weekDays:[0,1,2,3,4,5],weekStartOn:1,startHour:9,endHour:19,step:30,cellRenderer:({height:t,start:s,onCellClick:N,...u})=>{const n=s.getHours()===8,L=n?{}:u;return e.jsx(p,{style:{height:"100%",background:n?"#eee":"transparent",cursor:n?"not-allowed":"pointer"},onClick:se=>n?alert("Opss"):F(),disableRipple:n,...L})}},onEventClick:t=>{console.log("Event data",t),a(S(!0))},onCellClick:(t,s,N,u)=>{console.log(o(t).isBefore(o())),o(t).isAfter(o())?(console.log(o(t).format("HH:mm")),a(H(u)),a(z(o(t).format("YYYY-MM-DD"))),a(T(t)),a(S(!0))):a(w(!0))},getRemoteEvents:P,translations:{navigation:{month:r.get("scheduler.month"),week:r.get("scheduler.week"),day:r.get("scheduler.day"),today:r.get("scheduler.today"),agenda:r.get("scheduler.agenda")}}})]})]})})})]})}export{De as default};
