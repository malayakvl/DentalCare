import{c as b,q as y,u as N,W as _,r as I,j as e,Y as S,a as d,y as L}from"./app-DUD9FxAe.js";import{A as k}from"./AuthenticatedLayout-BBwQuZdH.js";import{a as P,L as A}from"./lang-Rf8_tUbV.js";import{l as C}from"./translation-C3eziIDM.js";import{I as E}from"./InputRoleSelect-XhwVtRZb.js";import{P as q}from"./PrimaryButton-DDpmqCs-.js";import{z as w}from"./transition-Dk6MwGSW.js";import"./ApplicationLogo-fdB6LoQ_.js";import"./portal-B0qkh_OA.js";import"./floating-ui.react-CImirEtS.js";import"./reselect-NCCDNIWx.js";import"./InputLabel-Doo0KOeK.js";import"./translation-CclwJSWy.js";function M({clinicData:p,filialData:i,rolesData:u,customer:n,assignedData:c}){b(),y().props.auth.user;const h=N(P),t=new A({messages:C,locale:h}),{processing:x,recentlySuccessful:g}=_(),[l,j]=I.useState({permissions:c}),f=s=>{s.preventDefault(),L.post("/customer/assign-submit",{customerId:n.id,clinicId:p.id,values:l})};return e.jsx(k,{header:e.jsx(S,{title:"Customers"}),children:e.jsx("div",{className:"py-0",children:e.jsx("div",{children:e.jsxs("div",{className:"p-4 sm:p-8 mb-8 content-data bg-content",children:[e.jsx("section",{children:e.jsx("header",{children:e.jsx("div",{className:"flex inline-flex",children:e.jsxs("h2",{children:[e.jsx(d,{className:"icon-back",href:"/customers",children:" "}),t.get("customer.attach")," «",n.name,"»"]})})})}),e.jsx("div",{children:e.jsxs("form",{onSubmit:f,className:"mt-0 space-y-4",encType:"multipart/form-data",children:[e.jsx("div",{className:"grid grid-cols-4 gap-4",children:i==null?void 0:i.map(s=>e.jsxs("div",{children:[e.jsx("h5",{children:s.name}),e.jsx(E,{name:`role_id_${s.id}`,values:c.find(r=>r.filial_id===s.id),options:u,onChange:r=>{let a=l.permissions;const v=r.target.id.replace("role_id_",""),m=a.filter(function(o){return o.filial_id!==parseInt(v)});parseInt(r.target.value)>0&&m.push({filial_id:s.id,role_id:r.target.value}),a=m,j(o=>({...o,permissions:a}))},required:!0,label:t.get("customer.role")})]},s.id))}),e.jsxs("div",{className:"flex items-center mt-5",children:[e.jsx(d,{className:"btn-back",title:t.get("customer.back"),href:"/customers",children:t.get("customer.back")}),e.jsx(q,{disabled:x,children:t.get("customer.save")}),e.jsx(w,{show:g,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-gray-600",children:t.get("customer.saved")})})]})]})})]})})})})}export{M as default};
